{
	"namespace": "hud_kpadv",

	"parsed_data_carrier": {
		"type": "panel",
		"size": [0, 0],
		"bindings": [
			{
				"binding_type": "view",
				"source_control_name": "kpadv_subtitle_data_binding",
				"source_property_name": "('' + #subtitle_text)",
				"target_property_name": "#subtitle_text_str",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "('%.4s' * #subtitle_text_str)",
				"target_property_name": "#head_item",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.9s' * #subtitle_text_str) - ('%.5s' * #subtitle_text_str))",
				"target_property_name": "#head_durability",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.14s' * #subtitle_text_str) - ('%.10s' * #subtitle_text_str))",
				"target_property_name": "#chest_item",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.19s' * #subtitle_text_str) - ('%.15s' * #subtitle_text_str))",
				"target_property_name": "#chest_durability",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.24s' * #subtitle_text_str) - ('%.20s' * #subtitle_text_str))",
				"target_property_name": "#legs_item",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.29s' * #subtitle_text_str) - ('%.25s' * #subtitle_text_str))",
				"target_property_name": "#legs_durability",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.34s' * #subtitle_text_str) - ('%.30s' * #subtitle_text_str))",
				"target_property_name": "#feet_item",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.39s' * #subtitle_text_str) - ('%.35s' * #subtitle_text_str))",
				"target_property_name": "#feet_durability",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.44s' * #subtitle_text_str) - ('%.40s' * #subtitle_text_str))",
				"target_property_name": "#offhand_item",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.49s' * #subtitle_text_str) - ('%.45s' * #subtitle_text_str))",
				"target_property_name": "#offhand_durability",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(('%.54s' * #subtitle_text_str) - ('%.50s' * #subtitle_text_str))",
				"target_property_name": "#offhand_stack_count",
				"binding_condition": "always"
			}
		]
	},

	"debug_value_label": {
		"type": "label",
		"text": "#text",
		"font_size": "small",
		"shadow": true,
		"layer": 100,
		"bindings": [{ "binding_name": "#show_survival_ui" }]
	},

	"subtitle_debug_panel": {
		"type": "stack_panel",
		"orientation": "vertical",
		"layer": 100,
		"offset": [2, 40],
		"propagate_alpha": true,
		"controls": [
			{
				"label_title@hud_kpadv.debug_value_label": {
					"$label": "RAW TITLE: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "kpadv_title_data_binding",
							"source_property_name": "($label + #preserved_text)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_title@hud_kpadv.debug_value_label": {
					"$label": "STRIPPED TITLE: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "kpadv_title_data_binding",
							"source_property_name": "($label + (#preserved_text - 'kado:'))",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_raw@hud_kpadv.debug_value_label": {
					"$label": "RAW SUBTITLE: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "kpadv_subtitle_data_binding",
							"source_property_name": "($label + #preserved_text)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_subtitle@hud_kpadv.debug_value_label": {
					"$label": "STRIPPED PREFIX: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "kpadv_subtitle_data_binding",
							"source_property_name": "($label + (#preserved_text - 'kado:'))",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_head_item@hud_kpadv.debug_value_label": {
					"$label": "Head Item: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #head_item)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_head_durability@hud_kpadv.debug_value_label": {
					"$label": "Head Durability: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #head_durability)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_chest_item@hud_kpadv.debug_value_label": {
					"$label": "Chest Item: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #chest_item)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_chest_durability@hud_kpadv.debug_value_label": {
					"$label": "Chest Durability: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #chest_durability)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_legs_item@hud_kpadv.debug_value_label": {
					"$label": "Legs Item: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #legs_item)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_legs_durability@hud_kpadv.debug_value_label": {
					"$label": "Legs Durability: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #legs_durability)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_feet_item@hud_kpadv.debug_value_label": {
					"$label": "Feet Item: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #feet_item)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_feet_durability@hud_kpadv.debug_value_label": {
					"$label": "Feet Durability: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #feet_durability)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_offhand_item@hud_kpadv.debug_value_label": {
					"$label": "Offhand Item: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #offhand_item)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_offhand_durability@hud_kpadv.debug_value_label": {
					"$label": "Offhand Durability: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #offhand_durability)",
							"target_property_name": "#text"
						}
					]
				}
			},
			{
				"label_offhand_stack_count@hud_kpadv.debug_value_label": {
					"$label": "Offhand Stack Count: ",
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "parsed_data_carrier",
							"source_property_name": "($label + #offhand_stack_count)",
							"target_property_name": "#text"
						}
					]
				}
			}
		],
		"bindings": [{ "binding_name": "#show_survival_ui" }]
	},

	"offhand_stack_count_label": {
		"type": "label",
		"text": "#text",
		"anchor_to": "bottom_right",
		"anchor_from": "bottom_right",
		"offset": [0, 1],
		"layer": 10,
		"shadow": true,
		"bindings": [
			{ "binding_name": "#show_survival_ui" },
			{
				"binding_type": "view",
				"source_control_name": "kpadv_subtitle_data_binding",
				"source_property_name": "('0' + #offhand_stack_count)",
				"target_property_name": "#stack_count_text"
			},
			{
				"binding_type": "view",
				"source_property_name": "((#stack_count_text - '0') * 1)",
				"target_property_name": "#stack_count_number"
			},
			{
				"binding_type": "view",
				"source_property_name": "('§z' + #stack_count_text - '0')",
				"target_property_name": "#text"
			},
			{
				"binding_type": "view",
				"source_property_name": "(((#stack_count_text - '9404') = #stack_count_text) and (#stack_count_number > 1) and #show_survival_ui)",
				"target_property_name": "#visible"
			}
		]
	},

	"offhand_stack_count_panel": {
		"type": "panel",
		"size": [18, 18],
		"controls": [{ "stack_count@hud_kpadv.offhand_stack_count_label": {} }]
	},

	"durability_bar": {
		"type": "custom",
		"renderer": "progress_bar_renderer",
		"size": [12, 1],
		"offset": [0, 5],
		"layer": 10,
		"property_bag": {
			"drop_shadow": true,
			"is_durability": true,
			"round_value": true,
			"#default_progress_bar_total_amount": 1000
		},
		"bindings": [
			{
				"binding_type": "view",
				"source_control_name": "kpadv_subtitle_data_binding",
				"source_property_name": "('§z' + $durability_data)",
				"target_property_name": "#item_renderer_text"
			},
			{
				"binding_type": "view",
				"source_property_name": "#default_progress_bar_total_amount",
				"target_property_name": "#progress_bar_total_amount"
			},
			{
				"binding_type": "view",
				"source_property_name": "($durability_data * 1)",
				"target_property_name": "#progress_bar_current_amount"
			},
			{
				"binding_type": "view",
				"source_property_name": "((#item_renderer_text - '9404' - '1000') = #item_renderer_text)",
				"target_property_name": "#touch_progress_bar_visible"
			},
			{ "binding_name": "#show_survival_ui", "binding_name_override": "#visible" }
		]
	},

	"durability_bar_panel": {
		"type": "panel",
		"controls": [{ "durability_bar@hud_kpadv.durability_bar": {} }]
	},

	"empty_slot_icon": {
		"type": "image",
		"texture": "$empty_slot_icon_texture",
		"size": [16, 16],
		"layer": 1,
		"bindings": [
			{
				"binding_type": "view",
				"source_property_name": "(($renderer_data = '0000') or ($renderer_data = '#none'))",
				"target_property_name": "#visible"
			}
		]
	},

	"item_renderer@item_id_kpadv.item_id": {
		"type": "image",
		"texture": "#texture",
		"size": [16, 16],
		"layer": 2,
		"bindings": [
			{
				"binding_type": "view",
				"source_control_name": "kpadv_subtitle_data_binding",
				"source_property_name": "('§z' + $renderer_data)",
				"target_property_name": "#item_renderer_text"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#item_renderer_text - '§z')",
				"target_property_name": "#renderer_data"
			},
			{
				"binding_type": "view",
				"source_property_name": "(not (#item_renderer_text = '§z0000'))",
				"target_property_name": "#visible"
			}
		]
	},

	"item_renderer_panel": {
		"type": "panel",
		"size": ["100%cm", "100%cm"],
		"$renderer_data|default": "#none",
		"$durability_data|default": "#none",
		"$additional_content|default": "hud_kpadv.durability_bar_panel",
		"controls": [
			{
				"item_renderer@hud_kpadv.item_renderer": {
					"$renderer_data": "$renderer_data"
				}
			},
			{
				"empty_slot_icon@hud_kpadv.empty_slot_icon": {
					"$renderer_data": "$renderer_data"
				}
			},
			{
				"additional_content@$additional_content": {
					"$renderer_data": "$renderer_data",
					"$durability_data": "$durability_data",
					"size": ["100%sm", "100%sm"]
				}
			}
		]
	},

	"title_text_data": {
		"type": "panel",
		"size": [0, 0],
		"bindings": [
			{ "binding_name": "#hud_title_text_string" },
			{
				"binding_name": "#hud_title_text_string",
				"binding_name_override": "#preserved_text",
				"binding_condition": "visibility_changed"
			},
			{
				"binding_type": "view",
				"source_property_name": "(not (#hud_title_text_string = #preserved_text) and not ((#hud_title_text_string - 'kado:') = #hud_title_text_string))",
				"target_property_name": "#visible"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#preserved_text - 'kado:')",
				"target_property_name": "#biome_code"
			},
			{
				"binding_type": "view",
				"source_property_name": "('#' + #biome_code)",
				"target_property_name": "#biome_key"
			},
			{
				"binding_type": "view",
				"source_property_name": "biome_id_kpadv.biome_id[#biome_key]",
				"target_property_name": "#biome_name"
			}
		]
	},

	"subtitle_text_data": {
		"type": "panel",
		"size": [0, 0],
		"alpha": 0,
		"bindings": [
			{ "binding_name": "#hud_subtitle_text_string" },
			{
				"binding_name": "#hud_subtitle_text_string",
				"binding_name_override": "#preserved_text",
				"binding_condition": "always"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#preserved_text - 'kado:')",
				"target_property_name": "#subtitle_text"
			}
		]
	},

	"biome_label": {
		"type": "label",
		"text": "#text",
		"layer": 10,
		"shadow": true,
		"bindings": [
			{ "binding_name": "#show_survival_ui" },
			{
				"binding_type": "view",
				"source_control_name": "kpadv_title_data_binding",
				"source_property_name": "('§z' + #biome_code)",
				"target_property_name": "#text"
			}
		]
	}
}
